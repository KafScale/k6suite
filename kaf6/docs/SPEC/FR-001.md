# Functional Requirements (FR-001)

This document captures the functional requirements for the KAF6 test suite tool.

## FR-001: Core Execution

- FR-001.1: Run a single scenario file and produce a report.
- FR-001.2: Run a suite directory of scenarios in deterministic order.
- FR-001.3: Validate suite integrity via hashes before execution.
- FR-001.4: Support re-rendering reports without re-running tests.

## FR-002: Scenario Model

- FR-002.1: Support producer scenarios (clients, messages, rate, topic).
- FR-002.2: Support consumer scenarios (group-based, offsets, limits, timeout).
- FR-002.3: Support metrics scenarios (HTTP GET).
- FR-002.4: Allow topic creation/deletion per scenario with unique run IDs.

## FR-003: Profiles

- FR-003.1: Load profiles from suite-local `profiles.json`.
- FR-003.2: Fall back to `config/profiles.json` if suite profiles are missing.
- FR-003.3: Allow scenarios to override brokers directly.
- FR-003.4: Run suite across all profiles when available.

## FR-004: Reporting

- FR-004.1: Generate HTML and JSON summaries per run.
- FR-004.2: Provide a unified HTML report template for single and suite runs.
- FR-004.3: Organize suite reports by profile with tabs.
- FR-004.4: Separate connectivity errors from run errors.
- FR-004.5: Render missing fields as "n.a." and never fail on old data.

## FR-005: Diagnostics

- FR-005.1: Perform a connectivity preflight against brokers.
- FR-005.2: Emit status (pass/fail) based on errors and checks.
- FR-005.3: Support verbose and debug output via env flags.

## FR-006: Selection UX

- FR-006.1: Provide an interactive selector to pick scenarios.
- FR-006.2: Provide an interactive selector to pick profiles.
- FR-006.3: Include "All" options for scenarios and profiles.

